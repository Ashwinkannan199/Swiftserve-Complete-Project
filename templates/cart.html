{% extends "base.html" %}

{% block content %}
<div class="dashboard-card">
    <h2 class="mb-4">Your Shopping Cart</h2>
    
    {% if cart_items %}
    <table class="table align-middle">
        <thead>
            <tr>
                <th>Item</th>
                <th>Price</th>
                <th style="width: 200px;">Quantity</th>
                <th>Total</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for data in cart_items %}
            <tr>
                <td>{{ data.item.name }}</td>
                <td>${{ "%.2f"|format(data.item.price) }}</td>
                <td>
                    <form action="{{ url_for('update_cart_item', item_id=data.item.id) }}" method="POST" class="d-flex">
                        <input type="number" name="quantity" class="form-control form-control-sm" value="{{ data.quantity }}" min="0">
                        <button type="submit" class="btn btn-secondary btn-sm ms-1">Update</button>
                    </form>
                </td>
                <td>${{ "%.2f"|format(data.item.price * data.quantity) }}</td>
                <td>
                    <form action="{{ url_for('remove_from_cart', item_id=data.item.id) }}" method="POST">
                        <button type="submit" class="btn btn-danger btn-sm">Remove</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <hr>
    
    <div class="d-flex justify-content-end align-items-center">
        <h3 class="me-4">Grand Total: <span class="text-primary">${{ "%.2f"|format(total_price) }}</span></h3>
        <a href="{{ url_for('checkout') }}" class="btn btn-primary btn-lg">Proceed to Checkout</a>
    </div>

    {% else %}
    <div class="text-center p-5">
        <h4>Your cart is empty!</h4>
        <p class="text-muted">Looks like you haven't added anything to your cart yet.</p>
        <a href="{{ url_for('home') }}" class="btn btn-primary mt-3">Browse Restaurants</a>
    </div>
    {% endif %}
</div>
{% endblock %}